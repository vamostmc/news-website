<app-navbar-authen></app-navbar-authen>

<!-- Loading -->
<div *ngIf="!loading" class="loading-overlay">
    <div class="spinner-container">
      <div class="spinner"></div>
      <p>Vui lòng chờ ...</p>
    </div>
</div>

<div class="container login-check">
    <!-- <button (click)="checkWithToken()">Gửi Request có Token</button> -->
    <div class="row justify-content-center">
        <div class="col-md-6 text-center mb-4">
            <h2 class="heading-section">Đăng nhập</h2>
        </div>
    </div>
    <div class="row justify-content-center">
        <div class="col-md-6 col-lg-5">
            <div class="login-wrap p-4 p-md-5 shadow rounded">
                <div class="icon d-flex align-items-center justify-content-center mb-4">
                    <span class="fa fa-user-o fa-3x"></span>
                </div>
                <h3 class="text-center mb-4">Bạn đã có tài khoản</h3>
                <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">

                    <div class="form-floating mb-3">
                        <input type="text" class="form-control" id="floatingUsername" placeholder="username" formControlName="username" required>
                        <label for="floatingUsername">Username</label>
                    </div>

                    <div class="form-floating mb-3 position-relative">
                        <input 
                          [type]="passwordFieldType" 
                          class="form-control" 
                          id="floatingPassword" 
                          placeholder="Password" 
                          formControlName="password" 
                          (input)="onPasswordInput($event)"
                          required
                        >
                        <label for="floatingPassword">Password</label>
                        
                        <!-- Nút hiển thị/ẩn mật khẩu, vị trí tuyệt đối -->
                        <button 
                          *ngIf="passwordEntered" 
                          type="button" 
                          (click)="togglePasswordVisibility()" 
                          class="password-toggle position-absolute">
                          <i [ngClass]="passwordVisible ? 'fa fa-eye' : 'fa fa-eye-slash'"></i>
                        </button>
                      </div>
                      

                    <div class="form-group d-md-flex mb-3">
                        <div class="w-50">
                            <label class="checkbox-wrap checkbox-primary">
                                Nhớ tài khoản
                                <input type="checkbox" formControlName="remember">
                                <span class="checkmark"></span>
                            </label>
                        </div>
                        <div class="w-50 text-md-right">
                            <a routerLink="/forgotPassword" class="forgot-password">Quên mật khẩu</a>
                        </div>
                    </div>

                    <!-- Hiển thị thông báo lỗi ở đây -->
                    <div *ngIf="errorMessage" class="alert alert-danger" role="alert">
                        {{ errorMessage }}
                    </div>
                    
                    <div class="form-group text-center">
                        <button type="submit" class="btn btn-primary submit p-3 px-5 w-50" [disabled]="loginForm.invalid">Xác nhận</button>
                    </div>
                    
                </form>

                <!-- Đăng nhập bằng cách khác -->
                <div class="form-group text-center mt-4">
                    <span>Hoặc đăng nhập bằng:</span>
                    <div class="d-flex justify-content-center mt-2">
                        <!-- Nút đăng nhập bằng Google -->
                        <!-- <button class="btn btn-outline-primary rounded-circle me-3 login-alt-btn" >
                            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/c1/Google_%22G%22_logo.svg/800px-Google_%22G%22_logo.svg.png" 
                                 alt="Google Logo" class="login-alt-logo" >
                                 
                        </button> -->
                        
                
                        <!-- Nút đăng nhập bằng Facebook -->
                        <!-- <button class="btn btn-outline-primary rounded-circle login-alt-btn" >
                            <img src="https://upload.wikimedia.org/wikipedia/commons/5/51/Facebook_f_logo_%282019%29.svg" 
                                 alt="Facebook Logo" class="login-alt-logo">
                        </button> -->
                        <div id="google-signin-btn"></div>
                    </div>
                </div>

                <!-- Dòng đăng ký -->
                <p class="mt-4 text-center register-link">
                    Bạn chưa có tài khoản? 
                    <a routerLink="/register" class="register-now">Đăng ký ngay</a>
                </p>

                <!-- login.component.html -->
                    
                <div id="google-signin-btn"></div>
                <!-- <button (click)="loginWithFacebook()">Login with Facebook</button>   
                
                <button (click)="loginWithFB()">Login with Facebook</button>       
                <div class="fb-login-button" 
                    data-width="auto" 
                    data-size="large" 
                    data-button-type="login_with" 
                    data-layout="rounded" 
                    data-auto-logout-link="false" 
                    data-use-continue-as="false">
                </div> -->
                
            </div>
        </div>
    </div>

</div>







